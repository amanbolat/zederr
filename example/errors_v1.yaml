schema_version: "1"
domain: acme.com

namespaces:
  security.auth:
    description: "Authentication and authorization errors"
    errors:
      account_locked:
        description: Account is locked due to too many failed login attempts.
        # Optional. When not empty the error will be marked as deprecated in documentation.
        # Generated code will be marked as deprecated as well, but it will not be removed.
        deprecated: ""
        status_code:
          http: 401
          grpc: 1
        arguments:
          user_id:
            # Required. The type of the argument. It can be
            # - string
            # - int
            # - float
            # - bool
            # - timestamp
            # - duration
            # - array<type> - TODO. Not supported yet.
            type: string
            # Required. The description of the argument. It will be used in the documentation.
            description: "User ID"
            # Optional. The translated description of the argument. It is used in the public error response.
            translations:
              en: "User ID"
              zh: "用户ID"
            # Optional. If true, the argument will not be displayed to the public consumers.
            # Internal arguments cannot be used in the `public_message`.
            # Generating public_message with internal arguments will result in an error.
            is_internal: true
          failed_attempts:
            type: int
            description: "Number of failed login attempts"
          unlock_time:
            type: timestamp
            description: "Time when the account will be unlocked"
        message:
          # Required. The internal message will be used in the code. It should not be displayed to the public consumers.
          # It will be sent to internal consumer.
          internal: >
            User with id {{ .UserID }} failed to provide correct credentials 
            {{ .FailedAttempts }} times. The account is locked until {{ .UnlockTime }}.
          public:
            en: "Your account is locked due to too many failed login attempts ({{ .FailedAttempts }})."
            zh: "您的帐户由于太多的登录尝试({{ .FailedAttempts }})而被锁定。"
        solution:
          internal: "Contact the admin and security team to unlock the account."
          public:
              en: "Wait until {{ .UnlockTime }} or contact support."
              zh: "等待{{ .UnlockTime }}或联系支持。"



#  user:
#    description: "User errors"
#    errors:
#      # Possible causes are `invalid_username` and `password_too_weak`.
#      create_user_validation:
#        # Optional. When not provided, 500 will be used by default.
#        http_code: 400
#        # Optional. When not provided, 13 will be used by default.
#        grpc_code: 2
#        # Description only for documentation purposes. Will not be used in the code.
#        description: "Invalid user data was provided during the registration process."
#        # Optional. When not provided, it will be displayed to the public consumers as an unknown error.
#        public_message:
#          en: "Failed to validate the user data."
#          zh: "无法验证用户数据。"
#        # Required. Will be used in the code. It should not be displayed to the public consumers.
#        internal_message: >
#          The user data provided during the registration process is invalid.
#      invalid_username:
#        http_code: 400
#        grpc_code: 3
#        description: "The username provided is invalid."
#        public_message:
#          en: "The username provided is invalid."
#          zh: "提供的用户名无效。"
#        internal_message: >
#          The username provided is invalid.
#      password_too_weak:
#        http_code: 400
#        grpc_code: 4
#        description: "The password provided is too weak."
#        public_message:
#          en: "The password provided is too weak."
#          zh: "提供的密码太弱。"
#        internal_message: >
#          The password provided is too weak.
